{"mappings":"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","sources":["src/index.js","src/krakenComponents/krakenComponents.js","src/krakenComponents/src/baseElements/KrElementClass/KrElementClass.js","src/krakenComponents/src/baseElements/KrGlobalElementDB/KrGlobalElementDb.js","src/krakenComponents/src/baseElements/elementHelpers.js","src/krakenComponents/src/baseElements/elementTransformation.js","src/krakenComponents/src/eventsElements/eventsElements.js","src/krakenComponents/src/eventsElements/eventDrag.js","src/krakenComponents/src/eventsElements/eventDrop.js","src/krakenComponents/src/eventsElements/eventReorder.js","src/krakenComponents/src/components/thing.js","src/krakenComponents/src/baseElements/KrComponent/KrComponent.js","src/krakenComponents/src/components/thingsDb.js","src/krakenComponents/src/baseElements/KrThingDb/KrThingDb.js","src/krakenComponents/src/components/property.js","src/krakenComponents/src/components/value.js","src/krakenComponents/src/components/record.js","src/krakenComponents/src/components/card.js","src/krakenComponents/src/components/list.js","src/krakenComponents/src/components/listItem.js","src/krakenComponents/src/components/actionMenuItem.js","src/krakenComponents/src/components/actionMenu.js","src/krakenComponents/src/components/avatar.js","src/krakenComponents/src/components/form.js"],"sourcesContent":["\n\nimport { krakenComponents} from './krakenComponents/krakenComponents.js'","\nimport { KrElementClass} from './src/baseElements/KrElementClass/KrElementClass.js'\nimport { KrThingComponent } from './src/components/thing.js'\nimport { KrThingDbComponent } from './src/components/thingsDb.js'\n\nimport { KrPropertyComponent } from './src/components/property.js'\nimport { KrValueComponent } from './src/components/value.js'\n\nimport { KrRecordComponent} from './src/components/record.js'\n\nimport { KrCardComponent} from './src/components/card.js'\n\nimport { KrListComponent} from './src/components/list.js'\nimport { KrListItemComponent} from './src/components/listItem.js'\n\nimport { KrActionMenuItemComponent} from './src/components/actionMenuItem.js'\nimport { KrActionMenuComponent} from './src/components/actionMenu.js'\n\nimport { KrAvatarComponent} from './src/components/avatar.js'\nimport { KrFormComponent} from './src/components/form.js'\n\n\nexport const krakenComponents = {\n\n    thing: KrThingComponent,\n    thingDb: KrThingDbComponent,\n    property: KrPropertyComponent,\n    value: KrValueComponent,\n    record: KrRecordComponent,\n    card: KrCardComponent,\n    base: KrElementClass,\n    list: KrListComponent,\n    listItem: KrListItemComponent,\n    actionMenuItem: KrActionMenuItemComponent,\n    actionMenu: KrActionMenuComponent,\n    avatar: KrAvatarComponent,\n    form: KrFormComponent\n}","import { krakenHtml } from \"krakenhtml\";\nimport { KrThing } from \"krakenthing\";\n\n\nimport { KrGlobalElementDb } from '../KrGlobalElementDB/KrGlobalElementDb.js'\n\nimport { elementHelpers as h } from \"../elementHelpers.js\";\nimport { preFormatElement } from '../elementTransformation.js'\n\nimport { setEvents } from '../../eventsElements/eventsElements.js'\n\n\n\nexport class KrElementClass {\n  constructor(element) {\n    this.db = new KrGlobalElementDb()\n    this._thing = null;\n    this.template = null;\n    this.element = element;\n  }\n  \n\n  // -----------------------------------------------------\n  //  Init\n  // -----------------------------------------------------\n\n  initObject() {\n\n    // Initialize object \n    this._initElement();\n    this.redraw()\n  \n  }\n\n  _initElement() {\n    if (!this._element || this._element == null) {\n      return;\n    }\n    \n    if (this.elementType == \"krThing\") {\n      this._initElementThing()\n    }\n\n    if (this.elementType == \"krProperty\") {\n      this._initElementProperty()\n    }\n\n    if (this.elementType == \"krValue\") {\n      this._initElementValue()\n    }\n    \n  }\n\n\n\n  _initElementThing(){\n    preFormatElement(this.element)\n    this._setID();\n    this.properties.map(x => x._initElement())\n    this.db.set(this.element, 'KrElementClass', this);\n\n    \n\n    if(this.thingDb && this.thingDb != null){\n      if(this.record_type && this.record_id){\n        \n        this.thingDb.addEventListener(this, this.record_type, this.record_id )\n        this.thingDb.get(this.record_type, this.record_id)\n      }\n    }\n\n    setEvents(this)\n  }\n  \n\n  _initElementProperty(){\n    \n    preFormatElement(this.element)\n    this._setID();\n\n    this.values.map(x => x._initElement())\n    this._getTemplate();\n    this.db.set(this.element, 'KrElementClass', this);\n    setEvents(this)\n    \n  }\n\n  _initElementValue(){\n    \n    preFormatElement(this.element)\n    this._setID();\n    this.things.map(x => x._initElement())\n    this.db.set(this.element, 'KrElementClass', this);\n    setEvents(this)\n    \n  }\n\n\n  \n  _blankRecordIds(element) {\n    element.id = \"\"; //String(crypto.randomUUID())''\n    element.setAttribute(\"kr-db-stored\", false);\n    for (let e of element.children) {\n      this._blankRecordIds(e);\n    }\n  }\n\n  _getTemplate() {\n    if (this.body.innerHTML != \"\") {\n      this._blankRecordIds(this.body);\n      this.template = this.body.innerHTML;\n      this.body.innerHTML = ''\n    }\n  }\n\n  _setID() {\n    if (\n      !this._element.id ||\n      this._element.id == null ||\n      this._element.id == \"\"\n    ) {\n      this._element.id = String(crypto.randomUUID());\n    }\n  }\n\n \n\n  // -----------------------------------------------------\n  //  Element attribute\n  // -----------------------------------------------------\n\n  convertToKrElement(element){\n    if(Array.isArray(element)){\n      let results = []\n      for(let e of element){\n        let obj = this.convertToKrElement(e)\n        if(obj && obj != null){\n          results.push(obj)\n        }\n      }\n      return results\n    }\n\n    if(!element || element == null){\n      return null\n    }\n    // Get from db\n    let obj = this.db.get(element, 'KrElementClass')\n\n    // Create if KrElement doesn't exist\n    if(!obj || obj == null){\n      obj = new KrElementClass(element)\n      this.db.set(element, 'KrElementClass', obj)\n    }\n    return obj\n    \n  }\n  \n  // Parent\n  get parentThing() {\n    return this.convertToKrElement(h.getParent(this.element, \"krThing\"));\n  }\n  get parentProperty() {\n    return this.convertToKrElement(h.getParent(this.element, \"krProperty\"));\n  }\n  get parentValue() {\n    return this.convertToKrElement(h.getParent(this.element, \"krValue\"));\n  }\n\n  // Children\n  get things() {\n    return this.convertToKrElement(h.getChildrenAll(this.element, \"krThing\", \"krProperty\"));\n  }\n  get properties() {\n    return this.convertToKrElement(h.getChildrenAll(this.element, \"krProperty\", \"krValue\"));\n  }\n  get values() {\n    return this.convertToKrElement(h.getChildrenAll(this.element, \"krValue\", \"krThing\"));\n  }\n\n  // Databases\n  get thingDb(){\n    return this.db.get(h.getParent(this.element, \"kr-db\"), 'KrThingDb')\n  }\n\n  // Sections\n  get header() {\n    let section = \"Header\";\n    let elementType = h.getType(this.element);\n    let nextElementType = h.getNextType(this.element);\n    return h.getChildren(this.element, elementType + section, nextElementType);\n  }\n\n  get body() {\n    let section = \"Body\";\n    let elementType = h.getType(this.element);\n    let nextElementType = h.getNextType(this.element);\n    return h.getChildren(this.element, elementType + section, nextElementType);\n  }\n\n  get footer() {\n    let section = \"Footer\";\n    let elementType = h.getType(this.element);\n    let nextElementType = h.getNextType(this.element);\n    return h.getChildren(this.element, elementType + section, nextElementType);\n  }\n\n  get action() {\n    let section = \"Action\";\n    let elementType = h.getType(this.element);\n    let nextElementType = h.getNextType(this.element);\n    return h.getChildren(this.element, elementType + section, nextElementType);\n  }\n\n  // -----------------------------------------------------\n  //  Attributes\n  // -----------------------------------------------------\n\n  get element() {\n    return this._element;\n  }\n\n  set element(value) {\n    this._element = value;\n    this.initObject();\n  }\n\n  get elementType() {\n    return h.getType(this.element);\n  }\n\n  get record_type() {\n    if (this._thing) {\n      return this._thing.record_type;\n    } else {\n      return this.element.getAttribute(\"data-record-type\");\n    }\n  }\n\n  set record_type(value) {\n    if (this._thing) {\n      this._thing.record_type = value;\n    } else {\n      this.element.setAttribute(\"data-record-type\", value);\n    }\n  }\n\n  get record_id() {\n    if (this._thing) {\n      return this._thing.record_id;\n    } else {\n      return this.element.getAttribute(\"data-record-id\");\n    }\n  }\n\n  set record_id(value) {\n    if (this._thing) {\n      this._thing.record_id = value;\n    } else {\n      this.element.setAttribute(\"data-record-id\", value);\n    }\n  }\n\n  get propertyID() {\n    return this.element.getAttribute(\"data-propertyID\");\n  }\n\n  set propertyID(value) {\n    return this.element.setAttribute(\"data-propertyID\", value);\n  }\n\n  get valueID() {\n    return this.element.getAttribute(\"data-valueID\");\n  }\n\n  set valueID(value) {\n    return this.element.setAttribute(\"data-valueID\", value);\n  }\n\n  \n  get thing() {    \n\n    let thing = this.parentThing?._thing;\n    return thing;\n    \n  }\n\n  set thing(value) {\n\n    // Save to db if exists\n    let thingDb = this.thingDb\n    if(thingDb && thingDb != null){\n      thingDb.set(value)\n      thingDb.addEventListener(this, value.record_type, value.record_id )\n    }\n    \n\n    //\n    this._thing = value;\n    if(this.element && this.element != null){\n      this.element.setAttribute(\"data-record-type\", value.record_type); \n      this.element.setAttribute(\"data-record-id\", value.record_id);\n    }\n    this.initObject();\n\n    let temp = this\n    this._thing.addEventListener('all', event =>{\n      console.log('Thing event')\n      temp.redraw()\n    })\n  }\n\n  get value() {\n    let thingObject = this.parentThing;\n    let record_type = thingObject.record_type;\n    let propertyObject = this.parentProperty;\n    let property = this.thing.getProperty(propertyObject.propertyID);\n    let pvs = property.propertyValues;\n\n    let value = null;\n    for (let pv of pvs) {\n      if (pv.record_id == this.valueID) {\n        value = pv.value;\n      }\n    }\n\n    if (value.record_type) {\n      value = value.record;\n    }\n  }\n\n  get templateID(){\n    return this.element.getAttribute('data-templateID')\n  }\n\n  set templateID(value){\n     this.element.setAttribute('data-templateID', value)\n  }\n\n  get options() {\n    let record = {\n      hostname: \"https://test.com\",\n      path: \"/\",\n      params: {},\n      record_type: \"Thing\",\n      record_id: \"Thing1\",\n    };\n    return record;\n  }\n\n  // -----------------------------------------------------\n  //  Redraw\n  // -----------------------------------------------------\n\n  redraw() {\n    \n    if (!this.thing || this.thing == null) {\n      return;\n    }\n    if(!this.element || this.element == null){ return }\n\n    switch (this.elementType) {\n      case \"krThing\":\n        return this._redrawThing();\n      case \"krProperty\":\n        return this._redrawProperty();\n      case \"krValue\":\n        return this._redrawValue();\n    }\n  }\n\n  _redrawThing() {\n\n    let record = this.thing.record\n    if(record?.['@type']){\n      record._heading1=record?.name\n      record._heading2=record?.['@id']\n    }\n\n\n    // Create properties from template if not already there\n    if(!this.properties || this.properties.length == 0){\n\n      if (this.templateID && this.templateID != null) {\n         h.redrawTemplateId(\n          this.body,\n          this.templateID,\n          record,\n          this.options,\n        );\n      } else if (this.template && this.template != null) {\n\n         h.redrawTemplate(\n          this.body,\n          this.template,\n          record,\n          this.options,\n        );\n      }      \n    }\n\n    // Refresh properties\n    if (this.properties.length > 0) {\n      for (let p of this.properties) {\n        if (p) {\n          p.redraw();\n        }\n      }\n    } \n    \n  }\n\n  _redrawProperty() {\n\n\n    let property = this.thing.getProperty(this.propertyID);\n    let pvs = property.propertyValues;\n\n    // Remove values no longer present\n    let pvIDs = pvs.map((x) => x.record_id);\n    h.removeChildren(this.element, \"krValue\", \"krThing\", \"valueID\", pvIDs);\n\n    let item;\n    for (let pv of pvs) {\n      // Get existing value element\n      let valueObject = this.convertToKrElement(\n        h.getChildren(\n          this.element,\n          \"krValue\",\n          \"krThing\",\n          \"valueID\",\n          pv.record_id,\n        )\n      );\n\n      \n      // Create if not already present\n      if (!valueObject || valueObject == null) {\n        let valueElement = document.createElement(\"span\");\n        valueElement.classList.add(\"krValue\");\n        valueElement.setAttribute(\"data-valueID\", pv.record_id);\n\n        valueObject = new KrElementClass(valueElement);\n        this.db.set(valueObject.element, 'KrElementClass', valueObject);\n      }\n\n      // Add to document\n      if (item) {\n        item.after(valueObject.element);\n      } else {\n        this.body.prepend(valueObject.element);\n      }\n\n      valueObject.redraw();\n    }\n  }\n\n  _redrawValue() {\n   \n    if (!this.body || this.body == null) {\n\n      // Add body if missing one\n      let temp = document.createElement(\"span\");\n      while (this.element.firstElementChild) {\n        temp.appendChild(this.element.firstElementChild);\n      }\n      this.element.innerHTML = this.getValueTemplate();\n      while (temp.firstElementChild) {\n        this.body.appendChild(temp.firstElementChild);\n      }\n    }\n\n    let thingObject = this.parentThing;\n    let record_type = thingObject.record_type;\n    let propertyObject = this.parentProperty;\n    let property = this.thing.getProperty(propertyObject.propertyID);\n    let pvs = property.propertyValues;\n\n    let value = null;\n    for (let pv of pvs) {\n      if (pv.record_id == this.valueID) {\n        value = pv.value;\n      }\n    }\n\n    if (propertyObject.templateID) {\n\n      let record = value.record || value\n      if(record['@type']){\n        record._heading1=record?.name\n        record._heading2=record?.url\n      }\n      h.redrawTemplateId(\n        this.body,\n        propertyObject.templateID,\n        record,\n        this.options,\n      );\n    } else if (propertyObject.template) {\n      \n      h.redrawTemplate(this.body, propertyObject.template);\n    } else {\n      h.redrawValue(\n        this.body,\n        record_type,\n        propertyObject.propertyID,\n        value.record || value,\n        this.options,\n      );\n    }\n\n    // COnvert child things to objects\n    if (this.things && this.things.length > 0) {\n      for (let t of this.things) {\n        t.thing = value;\n        t.redraw()\n      }\n    }\n\n    return;\n  }\n\n  // -----------------------------------------------------\n  //  Templates\n  // -----------------------------------------------------\n\n  getValueTemplate() {\n    let template = `\n    <span>Value</span>\n    <span class=\"krValueHeader\"></span>\n    <span class=\"krValueBody\"></span> \n    <span class=\"krValueFooter\"></span>\n    <span class=\"krValueAction\"></span> \n    \n    `;\n    return template;\n  }\n\n  \n}\n","\n\n\nconst GLOBAL_DB = {}\n\n\nexport class KrGlobalElementDb {\n    /**\n     * Database to store elements and associated information\n     *\n     * Store elements\n     * - setElement(element)\n     * - getElement(id)\n     * - getElements()\n     *\n     * Store associated information / objects\n     * - setObject(element / elementId, category, object)\n     * - getObject(element / elementId, category)\n     * - getObjects(category)\n     */\n    \n    constructor(){\n        this._db = GLOBAL_DB\n    }\n\n\n    getElements(){\n\n        let elements = []\n        for(let elementId of Object.keys(this._db)){\n\n            let element = this.getElement(elementId)\n            if(element && element != null){\n                elements.push(element)\n            }\n        }\n        return elements\n        \n    }\n\n    getElement(elementId){\n        return this._getObjectById(elementId, '_element')\n    }\n\n    getObject(element, category){\n        return this.get(element, category)\n    }\n\n    get(value, category){\n        if(!value || value == null || value )\n\n        if(Array.isArray(value)){\n            let results = []\n            for(let v of value){\n                results.push(this.get(v, category))\n            }\n            return results\n        }\n\n            \n        if(value instanceof Element || value instanceof Document ){\n            return this._getObjectByElement(value, category)\n        } else {\n            return this._getObjectById(value, category)\n        }\n    }\n\n\n    getObjects(category){\n\n        let elements = []\n        for(let elementId of Object.keys(this._db)){\n\n            let element = this.get(elementId, category)\n            if(element && element != null){\n                elements.push(element)\n            }\n        }\n        return elements\n        \n    }\n\n    _getObjectById(elementId, category){\n\n        if(!elementId || elementId== null || elementId == ''){ return null }\n        \n        let record = this._db?.[elementId]\n        let object = record?.[category]\n\n        return object\n    }\n\n    \n    _getObjectByElement(element, category){\n\n        if(!element || element == null || element == ''){ return null }\n\n        let elementId = element.id\n        return this._getObjectById(elementId, category)\n        \n    }\n\n    \n\n    set(value, category, object){\n\n        if(!value || value == null || value == ''){ return false }\n\n        \n        if(value instanceof Element || value instanceof Document ){\n            this._setObjectByElement(value, category, object)\n        } else {\n            this._setObjectById(value, category, object)\n        }\n    }\n\n\n    setElement(element){\n        // Set id\n        let elementId = element.id\n        if(!elementId || elementId == null || elementId == ''){\n            element.id = String(crypto.randomUUID())\n            elementId = element.id\n        }\n\n        this._setObjectById(elementId, '_element', element)\n        \n    }\n\n    \n    \n    _setObjectByElement(element, category, object){\n\n        if(!element || element == null || element == ''){ return false }\n\n        if(!category || category == null){ this.setElement(value)}\n\n        \n        // Set id\n        let elementId = element.id\n        if(!elementId || elementId == null || elementId == ''){\n            element.id = String(crypto.randomUUID())\n            elementId = element.id\n        }\n\n\n        // Set element\n        this.setElement(element, element)\n\n        \n        // Set object\n        return this._setObjectById(elementId, category, object)\n        \n    }\n\n    _setObjectById(elementId, category, object){\n        \n        // Set id\n        if(!elementId || elementId== null || elementId == ''){ return false }\n        \n        let record = this._db?.[elementId]\n\n        if(!record || record == null){\n            record = {}\n            this._db[elementId] = record\n        }\n\n        // Store object\n        record[category] = object\n\n    }\n    \n}\n\n\n","import { krakenHtml } from \"krakenhtml\";\n\n\n\nexport const elementHelpers = {\n    getParent: getParentElement,\n    getParentTop: getParentElementTop,\n    getChildren: getChildrenElement,\n    getChildrenAll: getChildrenElementAll,\n    getType: getElementType,\n    getNextType: getElementNextType,\n    redrawTemplate: redrawFromTemplate,\n    redrawTemplateId: redrawFromTemplateID,\n    redrawValue: redrawValue,\n    removeChildren: removeChildren\n};\n\n\n\n\nfunction getElementType(element) {\n    if (element.classList.contains(\"krThing\")) {\n        return \"krThing\";\n    }\n    if (element.classList.contains(\"krProperty\")) {\n        return \"krProperty\";\n    }\n    if (element.classList.contains(\"krValue\")) {\n        return \"krValue\";\n    }\n    return null;\n}\n\nfunction getElementNextType(element) {\n    // Returns next type in hierarchy\n    let elementType = getElementType(element);\n    switch (elementType) {\n        case \"krThing\":\n            return \"krProperty\";\n        case \"krProperty\":\n            return \"krValue\";\n        case \"krValue\":\n            return \"krThing\";\n        default:\n            return null;\n    }\n}\n\nfunction getParentElement(element, className) {\n    if(!element || element == null){ return undefined }\n    return element.closest(\".\" + className) || undefined;\n}\n\nfunction getParentElementTop(element, className) {\n    let topParent = undefined;\n    let item = element;\n    while (item) {\n        if (item.classList.includes(className)) {\n            topParent = item;\n        }\n        item = item.parentElement;\n    }\n    return topParent;\n}\n\nfunction getChildrenElement(\n    element,\n    classToGet,\n    classToStop,\n    attributeID1,\n    attributeValue1,\n    attributeID2,\n    attributeValue2,\n) {\n    // Get a specific children element\n    let childrenElements = getChildrenElementAll(\n        element,\n        classToGet,\n        classToStop,\n    );\n    for (let e of childrenElements) {\n        if (attributeID1 && attributeID1 != null) {\n            let pv1 = e.getAttribute(attributeID1);\n            if (pv1 != attributeValue1) {\n                continue;\n            }\n        }\n\n        if (attributeID2 && attributeID2 != null) {\n            let pv2 = e.getAttribute(attributeID2);\n            if (pv2 != attributeValue2) {\n                continue;\n            }\n        }\n\n        return e;\n    }\n\n    return undefined;\n}\n\nfunction getChildrenElementAll(\n    element,\n    classToGet,\n    classToStop,\n    attributeID1,\n    attributeValue1,\n    attributeID2,\n    attributeValue2,\n) {\n    // Get a specific children element\n\n    let results = [];\n    let childrenElements = _getAllChildren(element, classToGet, classToStop);\n    for (let e of childrenElements) {\n        if (attributeID1 && attributeID1 != null) {\n            let pv1 = e.getAttribute(attributeID1);\n            if (pv1 != attributeValue1) {\n                continue;\n            }\n        }\n\n        if (attributeID2 && attributeID2 != null) {\n            let pv2 = e.getAttribute(attributeID2);\n            if (pv2 != attributeValue2) {\n                continue;\n            }\n        }\n\n        results.push(e);\n    }\n\n    return results;\n}\n\nfunction _getAllChildren(element, classToGet, classToStop) {\n\n    let results = [];\n    \n    for (let e of element.children) {\n\n        if(e.classList.contains(classToStop)){\n            continue\n        }\n        \n        if(e.classList.contains(classToGet)){\n            results.push(e)\n        }\n        \n        let v = _getAllChildren(e, classToGet, classToStop);\n        if (v.length > 0) {\n            results = results.concat(v);\n        }\n        \n    }\n    \n    \n    return results;\n}\n\nfunction removeChildren(\n    element,\n    classToGet,\n    classToStop,\n    attributeID,\n    attributeValues,\n) {\n    // Remove children that is not in the list of attribute Values\n\n    if (!Array.isArray(attributeValues)) {\n        attributeValues = [attributeValues];\n    }\n\n    let childrens = _getAllChildren(element, classToGet, classToStop);\n    for (let e of childrens) {\n        let propertyValue = e.getAttribute(attributeID);\n        if (!attributeValues.includes(propertyValue)) {\n            e.remove();\n        }\n    }\n}\n\n// -----------------------------------------------------\n//  Redraw\n// -----------------------------------------------------\n\nfunction redrawValue(element, record_type, key, value, options) {\n    \n    element.innerHTML = krakenHtml.base.value(value, record_type, key, options);\n}\n\n\nfunction replaceRecordIds(element){\n\n    element.id = String(crypto.randomUUID())\n    for(let e of element.children){\n        replaceRecordIds(e)\n    }\n    \n}\n\nfunction redrawFromTemplate(element, template) {\n    let temp = document.createElement('div')\n    temp.innerHTML = template;\n    //replaceRecordIds(temp)\n    element.innerHTML= ''\n    while(temp.firstElementChild){\n        element.appendChild(temp.firstElementChild)\n    }\n    \n    \n    return;\n}\n\nfunction redrawFromTemplateID(element, templateID, value, options) {\n    \n    try {\n        element.innerHTML = krakenHtml.form?.[templateID](value, options);\n    } catch (error){\n    \n    \n    try {\n        element.innerHTML = krakenHtml.components[templateID](value, options);\n    } catch (error) {\n        try {\n            element.innerHTML = krakenHtml.blocks[templateID](value, options);\n        } catch (error){\n\n            try {\n                element.innerHTML = krakenHtml.base[templateID](value, options);\n            } catch (error){\n                \n            }\n            \n        }\n    }\n    }\n\n    \n    return;\n}\n","import { elementHelpers as h } from \"./elementHelpers.js\";\n\n\n\n// -----------------------------------------------------\n//  Preformat \n// -----------------------------------------------------\n\nexport function preFormatElement(element){\n\n    // Formats the element prior to use\n    preFormatReplacePlaceHolders(element)\n    preFormatMissingClasses(element)\n    preFormatMissingParentThing(element)\n    preFormatMissingThing(element)\n    preFormatReplaceKrValue(element)\n    preFormatInsertBody(element)\n\n    for(let e of element.children){\n        preFormatElement(e)\n    }\n\n    \n\n}\n\n\n\nfunction preFormatReplacePlaceHolders(element){\n    // Replace references in {{ }} like {{ name }} or {{ item.name }} with properties\n\n\n    // Get text nodes\n    let textNodes = []\n    for(let node of element.childNodes){\n\n        if(node.nodeType == 3){\n            textNodes.push(node)\n        }\n    }\n\n    for(let node of textNodes){\n    \n        const content = node.nodeValue\n        \n        if(!content || content == null || content == ''){ return }\n        \n        const properties = content.match(/\\{\\{(.*?)\\}\\}/g);\n    \n        if(!properties || properties == null){ return }\n    \n        \n        for(let p of properties){\n    \n           \n            let word = p.replace('{{', '')\n            word = word.replace('}}', '')\n            word = word.trim()\n    \n            let path = word.split('.')\n    \n            let newContent = ''\n    \n            // Open property\n            for(let p of path){\n                newContent += `<span class=\"krProperty\" data-propertyID=\"${p}\">`\n            }\n    \n            // Close properties\n            for(let p of path){\n                newContent = newContent + '</span>'\n            }\n    \n            // Update element textContent\n            node.nodeValue = content.replace(p, '')\n    \n            let temp = document.createElement('span')\n            temp.innerHTML = newContent\n    \n            element.appendChild(temp)\n            \n        }\n    }\n    \n    \n}\n\n\nfunction preFormatMissingClasses(element){\n\n    // Converts elements with proper attributes to proper class \n\n    let record_type = element.getAttribute('data-record-type')\n    let record_id = element.getAttribute('data-record-id')\n    let propertyID = element.getAttribute('data-propertyID')\n    let valueID = element.getAttribute('data-valueID')\n\n    let record_type_null = !record_type || record_type == null || record_type == ''\n    let record_id_null = !record_id || record_id == null || record_id == ''\n    let record_propertyID_null = !propertyID || propertyID == null || propertyID == ''\n    let record_valueID_null = !valueID || valueID == null || valueID == ''\n\n    // Convert to krThing if type and id but not property\n    if(record_type_null == false && record_id_null == false && record_propertyID_null == true){\n        element.classList.add('krThing')\n    }\n\n    // Convert to krProperty if type and id but not property\n    if(record_propertyID_null == false && record_valueID_null == true){\n        element.classList.add('krProperty')\n    }\n\n    // Convert to krProperty if type and id but not property\n    if(record_valueID_null == false){\n        element.classList.add('krValue')\n    }\n\n}\n\nfunction preFormatMissingParentThing(element){\n\n    if(element.classList.contains('krProperty')){\n        // If not krThing above, insert krThing\n        let thingElement = h.getParent(element, 'krThing', 'krProperty')\n        if(!thingElement || thingElement == null ){\n            let parentElement = insertParentElement(element, 'krThing')\n            parentElement.classList.add('kr-added-missing-parent-thing')\n            parentElement.setAttribute('data-record-type', element.getAttribute('data-record-type'))\n            parentElement.setAttribute('data-record-id', element.getAttribute('data-record-id'))\n        }\n    }\n\n}\n\nfunction preFormatMissingThing(element){\n\n    if(element.classList.contains('krProperty')){\n        // If property child of another property, insert krThing\n        let childProperties = h.getChildrenAll(element, 'krProperty', 'krThing')\n        for(let e of childProperties){\n            insertParentElement(e, 'krThing')\n        }\n    }\n\n}\n\n\nfunction preFormatReplaceKrValue(element){\n\n    if(element.classList.contains('krProperty')){\n\n        // Remove krValue\n        let childValues = h.getChildrenAll(element, 'krValue', 'krProperty')\n\n        // Repalce child values\n        for(let e of childValues){\n\n            // get value body\n            let valueBody = h.getChildren(e, 'krValueBody', 'krProperty')\n            if(valueBody && valueBody != null){\n                while(e.firstElementChild){\n                    e.parentElement.appendChild(e.firstElementChild)\n                }\n                e.remove()\n\n            } else {\n                e.classList.add('krValueBody')\n                e.classList.remove('krValue')\n            }\n\n\n\n        }\n    }\n}\n\n\nfunction preFormatInsertBody(element){\n\n    // Inserts a krXXXBody elementif missing one\n    let elementType = h.getType(element)\n    if(!elementType || elementType == null){ return }\n\n    let elementNextType = h.getNextType(element)\n    let bodyElement = h.getChildren(element, elementType + 'Body', elementNextType)\n\n    if(!bodyElement || bodyElement == null){\n        insertChildElement(element, elementType + 'Body')\n    }\n\n}\n\n\nfunction insertParentElement(element, className){\n\n    let temp = document.createElement('span')\n    temp.classList.add(className)\n\n    element.after(temp)\n    temp.appendChild(element)\n\n    return temp\n\n}\n\nfunction insertChildElement(element, className){\n    // Inserts a child between current element and childrens\n    let temp = document.createElement('span')\n    temp.classList.add(className)\n\n    while(element.firstElementChild){\n        temp.appendChild(element.firstElementChild)\n    }\n\n    element.appendChild(temp)\n\n    return temp\n\n}\n","\n\nimport { setEventDrag } from './eventDrag.js'\nimport { setEventDrop } from './eventDrop.js'\nimport { setEventReorder } from './eventReorder.js'\n\n\n\n\nexport function setEvents(BaseElement, DB){\n\n\n    if(BaseElement.element.classList.contains('krDrag')){\n        setEventDrag(BaseElement, DB)\n        \n    }\n\n    if(BaseElement.element.classList.contains('krDrop')){\n            setEventDrop(BaseElement, DB)\n\n    }\n\n\n    if(BaseElement.element.classList.contains('krReorder')){\n        setEventReorder(BaseElement, DB)\n    }\n\n    \n}","\n\n\nexport function setEventDrag(BaseElement){\n\n\n    BaseElement.element.draggable=true\n    \n    BaseElement.element.addEventListener('dragstart', event => {\n\n        event.dataTransfer.setData(\"text/plain\", JSON.stringify(BaseElement.thing.record));\n        \n    })\n\n    \n}","\n\n\nexport function setEventDrop(BaseElement){\n\n\n    console.log('test')\n    \n    BaseElement.element.addEventListener('dragover', event => {\n\n        event.preventDefault()\n        event.stopPropagation()\n        \n        \n        \n    })\n\n    BaseElement.element.addEventListener('drop', event => {\n\n        event.preventDefault()\n        event.stopPropagation()\n\n        console.log('drop')\n\n        if(BaseElement.propertyID == 'itemListElement'){\n            BaseElement.thing.l.add(JSON.parse(event.dataTransfer.getData(\"text/plain\")))\n        } else {\n            BaseElement.thing.p.add(BaseElement.propertyID, JSON.parse(event.dataTransfer.getData(\"text/plain\")))\n        }\n        BaseElement.redraw()\n    })\n\n    \n}","\n\n\nexport function setEventReorder(BaseElement, DB){\n\n\n\n    \n    \n    BaseElement.element.draggable=true\n\n\n    BaseElement.element.addEventListener('dragstart', event => {\n\n        event.dataTransfer.setData(\"text/plain\", JSON.stringify(BaseElement.thing.record));\n        event.target.classList.add('dragging')\n\n    })\n\n    BaseElement.element.addEventListener('dragend', event => {\n\n        event.dataTransfer.setData(\"text/plain\", JSON.stringify(BaseElement.thing.record));\n        event.target.classList.add('dragging')\n\n    })\n\n    \n    BaseElement.element.addEventListener('dragover', event => {\n\n        event.preventDefault()\n        event.stopPropagation()\n        \n        \n    })\n\n    BaseElement.element.addEventListener('drop', event => {\n\n        event.preventDefault()\n        event.stopPropagation()\n\n        console.log('Reorder drop')\n\n        let draggingElement = document.querySelector('.dragging')\n\n\n        if(!draggingElement){ return }\n        \n        console.log(draggingElement)\n        \n        draggingElement.classList.remove('dragging')\n        let draggingObject = DB.get(draggingElement)\n\n        let dropzoneObject = DB.get(event.currentTarget)\n\n        console.log(draggingObject.thing.ref)\n        \n        console.log(dropzoneObject.thing.ref)\n\n        \n        let item = event.currentTarget\n        let itemList = null\n        \n        while(item){\n            console.log(item.tagName)\n            if(item.classList.contains('krThing')){\n                let temp = DB.get(item)\n                if(temp.record_type == 'ItemList'){\n                    itemList = temp\n                    break\n                }\n                \n            }\n            item = item.parentElement\n        }\n\n        if(itemList){\n            console.log(itemList.thing.ref)\n                itemList.thing.l.insertBefore(draggingObject.thing.ref, dropzoneObject.thing.ref)\n        }\n        \n        \n        BaseElement.redraw()\n    })\n\n    \n}","\n\nimport { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\nexport class KrThingComponent extends KrComponent {\n  constructor() {\n    super('krThing', 'generic');\n\n\n  }\n\n\n\n\n}\n\ncustomElements.define(\"kr-thing-item\", KrThingComponent);\n\n\n","import { KrElementClass } from '../KrElementClass/KrElementClass.js'\n\n\nexport class KrComponent extends HTMLElement {\n  constructor(elementClass, htmlTemplateID) {\n    super();\n    this.elementClass = elementClass\n      this.htmlTemplateID = htmlTemplateID\n    this.KrElement = null\n  }\n\n\n  initObject(){\n\n    this.classList.add(this.elementClass)\n    this.KrElement = new KrElementClass(this)\n\n    if(this.htmlTemplateID && this.htmlTemplateID != null){\n      this.KrElement.templateID = this.htmlTemplateID\n    }\n\n    if(this.htmlTemplate && this.htmlTemplate != null && this.htmlTemplate != ''){\n      this.KrElement.template = this.htmlTemplate\n      this.KrElement.redraw()\n    }\n\n\n\n  }\n\n  get htmlTemplate(){\n    return 'bob'\n  }\n\n  get template(){\n    return ''\n  }\n\n\n  get thing(){\n    return this.KrElement.thing\n  }\n\n\n  set thing(value){\n    this.KrElement.thing = value\n  }\n\n\n  redraw(){\n    this.KrElement.redraw()\n  }\n\n  connectedCallback() {\n    //this.initObject()\n    this.initObject()\n  }\n\n  disconnectedCallback() {\n  }\n\n  adoptedCallback() {\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n\n}\n\ncustomElements.define(\"kr-base-component\", KrComponent);\n\n","\n\nimport { KrThingDb } from '../baseElements/KrThingDb/KrThingDb.js'\n\n\nexport class KrThingDbComponent extends HTMLElement {\n  constructor() {\n    super();\n    this._thingDB = null\n  }\n\n\n  initObject(){\n\n    console.log('Init thing db component')\n    this._initElement()\n    this._thingDb = new KrThingDb(this.element)\n    \n  }\n\n\n  get element(){\n    return this\n  }\n\n  \n  _initElement(){\n\n    let temp = document.createElement('span')\n    temp.innerHTML = this.htmlTemplate\n    let body = temp.querySelector('.krDbBody')\n\n    while(this.element.firstChild){\n      body.appendChild(this.element.firstChild)\n    }\n\n    this.element.appendChild(temp)\n  }\n\n\n  \n  \n  get htmlTemplate(){\n    return `\n\n        <div>\n\n          <div class=\"border row\">\n\n            <div class=\"border col\">\n  \n            DB Element\n\n            </div>\n\n            <div class=\"border col\">\n\n              Save button\n\n            </div>\n\n          </div>\n\n\n          <div class=\"border row krDbBody\">\n\n\n\n          </div>\n\n        </div>\n\n    `\n  }\n\n  connectedCallback() {\n    //this.initObject()\n    this.initObject()\n  }\n\n  disconnectedCallback() {\n  }\n\n  adoptedCallback() {\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\n\ncustomElements.define(\"kr-thing-db\", KrThingDbComponent);\n\n","\nimport { KrThing, KrCache } from \"krakenthing\";\nimport { KrGlobalElementDb } from '../KrGlobalElementDB/KrGlobalElementDb.js'\n\n\nconst DEFAULT_APIURL = 'https://data.krknapi.com'\nconst DEFAULT_APIBASEPATH = '/api'\nconst DEFAULT_APICOLLECTION = 'testComponent'\n\n\n\n\n\nexport class KrThingDb {\n    /**\n     * On page database of things acting aslso as proxy for saving retrieving to API\n     * \n     */\n\n    constructor(element){\n        this._thingDb = new KrCache()\n        this.callbacks = {}\n        this.elementDb = new KrGlobalElementDb()\n        this.element = element\n        \n    }\n\n\n    initObject(){\n        let element = document.createElement('span')\n        element.classList.add('kr-db')\n        element.id = String(crypto.randomUUID())\n        this.elementDb.set(this.element, 'KrThingDb', this)\n\n        // Activate element under \n        for(let e of this.element.querySelectorAll('.krThing')){\n            let KrElement = this.elementDb.get(e, 'KrElementClass')\n            if(KrElement && KrElement != null){\n\n                KrElement.addEventListener(KrElement, KrElement.record_type, KrElement.record_id)\n                this.get(KrElement.record_type, KrElement.record_id)\n              \n            }\n        }\n        \n    }\n\n    get element(){\n        return this._element\n    }\n\n    set element(value){\n        \n        this._element = value\n        this._element.classList.add('kr-db')\n        this.initObject()\n    }\n\n    get apiUrl(){\n        return this.element.getAttribute('data-apiUrl') || DEFAULT_APIURL\n    }\n\n    get apiBasePath(){\n        return this.element.getAttribute('data-apiBasePath') || DEFAULT_APIBASEPATH\n    }\n\n    get apiCollection(){\n        return this.element.getAttribute('data-apiCollection') || DEFAULT_APICOLLECTION\n    }\n\n\n    async initElements(){\n\n        let thingElements = this.element.querySelector('.krThing')\n\n        for(let e of thingElements){\n\n          let record_type = e.getAttribute('data-record-type')\n          let record_id = e.getAttribute('data-record-id')\n\n          let thing = await this.get(record_type, record_id)\n\n        }\n\n    }\n\n\n    async get(record_type, record_id){\n\n        // Get from local cache\n        let thing = this._thingDb.get(record_type, record_id)\n\n        // If not in db, get from api\n        if(!thing || thing == null){\n            this._getFromApi(record_type, record_id)\n        }\n\n        // Else create\n        if(!thing || thing == null){\n            thing = new KrThing(record_type, record_id)\n        }\n\n        return thing\n    }\n\n    async _getFromApi(record_type, record_id){\n\n\n        if(record_type === undefined || record_type == null || record_type == 'undefined'){ return }\n        if(!record_id || record_id == null || record_id == 'undefined'){ return }\n        \n        if(!this.apiUrl || this.apiUrl == null || this.apiUrl == ''){\n            return null\n        }\n\n        let thing = new KrThing(record_type, record_id)\n        thing.api.apiUrl = this.apiUrl\n        thing.api.apiBasePath = this.apiBasePath\n        thing.api.apiCollection = this.apiCollection\n\n        let r = await thing.api.get()\n\n        if(r.p.actionStatus == 'CompletedActionStatus'){\n            this.set(thing)\n            return thing\n        }\n\n        return null\n\n    }\n\n    set(thing){\n\n        if(!thing || thing == null || !thing.record_type) { return }\n\n        let previousThing = this._thingDb.get(thing.record_type, thing.record_id)\n\n        \n\n        \n        this._thingDb.set(thing)\n\n        // Run callbacks if changed\n        if(!previousThing || previousThing == null || JSON.stringify(previousThing.record) != JSON.stringify(thing.record)){\n            this.runCallbacks(thing)\n        } else {\n        }\n    }\n\n    async save(thing){\n\n        if(!thing.api.apiUrl || thing.api.apiUrl == null || thing.api.apiUrl == ''){\n            return false\n        }\n\n        thing.api.apiUrl = this.apiUrl \n        thing.api.apiBasePath = this.apiBasePath\n        thing.api.apiCollection = this.apiCollection\n\n        await thing.api.post()\n\n        // Add ot local cache\n        this._thingDb.set(thing)\n\n    }\n\n\n    async saveAll(){\n\n        let things = this._thingDb.things\n\n        for(let thing of things){\n            await this.save(thing)\n        }\n    }\n\n\n    runCallbacks(thing){\n\n        let KrElements = this.callbacks?.[thing.record_type]?.[thing.record_id]\n\n        for(let k of KrElements){\n            k.thing = thing\n        }\n\n        \n    }\n\n    addEventListener(KrElement, record_type, record_id){\n\n\n\n        if(!record_type || record_type == null){ return }\n        if(!record_id || record_id == null){ return }\n\n        \n        if(!this.callbacks?.[record_type]){\n            this.callbacks[record_type] = {}\n        }\n        if(!this.callbacks[record_type]?.[record_id]){\n            this.callbacks[record_type][record_id] = []\n        }\n\n        // Check if already in list\n        for(let e of this.callbacks[record_type][record_id]){\n            if(KrElement === e){ return }\n        }\n\n        // Add to list\n        this.callbacks[record_type][record_id].push(KrElement)\n        \n    }\n\n}\n\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\nexport class KrPropertyComponent extends KrComponent {\n  constructor() {\n    super('krProperty');\n    this.classList.add('krProperty')\n\n  \n\n  }\n\n\n\n  \n}\n\ncustomElements.define(\"kr-property\", KrPropertyComponent);\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\nexport class KrValueComponent extends KrComponent {\n  constructor() {\n    super('krValue');\n    this.classList.add('krValue')\n\n  \n\n  }\n\n\n}\n\ncustomElements.define(\"kr-value\", KrValueComponent);\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\nexport class KrRecordComponent extends KrComponent {\n  constructor() {\n    super('krThing', 'generic');\n\n\n  }\n\n\n\n\n}\n\ncustomElements.define(\"kr-record\", KrRecordComponent);\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\n\nexport class KrCardComponent extends KrComponent {\n  constructor() {\n    super('krThing', 'card');\n    \n  }\n}\n\ncustomElements.define(\"kr-card\", KrCardComponent);\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\nexport class KrListComponent extends KrComponent {\n  constructor() {\n    super('krThing', null);\n\n  }\n\n  get htmlTemplate(){\n    return `\n\n        <h1> Tes223</h1>\n\n        <div class=\"krProperty\" data-propertyID=\"name\">\n          <h1><span class=\"krValue\"></span></h1>\n        </div>\n\n        <div class=\"krProperty krDrop\" data-propertyID=\"itemListElement\">\n          <kr-list-item class=\"krReorder\"></kr-list-item>\n        </div>    \n\n    `\n  }\n\n}\n\ncustomElements.define(\"kr-list\", KrListComponent);","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\n\nexport class KrListItemComponent extends KrComponent {\n  constructor() {\n    super('krThing', null);\n    \n\n   \n  }\n\n  get htmlTemplate(){\n    return `\n\n        <div class=\"row m-2\">\n              <div class=\"col krProperty\" data-propertyID=\"position\">\n\n              </div>\n\n              <div class=\"col krProperty\" data-propertyID=\"item\">\n                <kr-card></kr-card>\n              </div>\n        </div>\n\n    `\n  }\n\n}\n\ncustomElements.define(\"kr-list-item\", KrListItemComponent);\n\n","\nimport { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\nexport class KrActionMenuItemComponent extends KrComponent {\n  constructor() {\n    super('krThing');\n\n  }\n\n  get htmlTemplate(){\n    return `\n\n        <li>\n            <a class=\"dropdown-item\">\n                    \n                    <span class=\"krProperty\"data-propertyID=\"image\"><kr-avatar></kr-avatar> </span>\n                    <span class=\"krProperty\" data-propertyID=\"name\"></span>\n            </a>\n        </li>\n\n    `\n  }\n\n\n  \n}\n\ncustomElements.define(\"kr-action-menu-item\", KrActionMenuItemComponent);\n\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\n\nexport class KrActionMenuComponent extends KrComponent {\n  constructor() {\n    super('krProperty');\n      \n      \n  }\n\n  get htmlTemplate(){\n    return `\n\n         <div class=\"dropdown\">\n        <a class=\"btn p-0\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  fill=\"currentColor\" class=\"bi bi-three-dots-vertical\" >\n                <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0\"/>\n            </svg>\n\n        </a>\n\n        <ul class=\"dropdown-menu\">\n\n            \n            <kr-action-menu-item>\n            \n            </kr-action-menu-item>\n\n        \n        </ul>\n    </div>\n\n    `\n  }\n\n\n  \n}\n\ncustomElements.define(\"kr-action-menu\", KrActionMenuComponent);\n\n\n","import { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\n\n\n\nexport class KrAvatarComponent extends KrComponent {\n  constructor() {\n    super('krThing', 'mediaAvatar');\n    \n  }\n}\n\ncustomElements.define(\"kr-avatar\", KrAvatarComponent);\n\n","\nimport { KrThing } from 'krakenthing'\nimport { KrComponent } from '../baseElements/KrComponent/KrComponent.js'\nimport { KrElementClass } from '../baseElements/KrElementClass/KrElementClass.js'\nimport { KrakenSchemas, KrSchemaItem } from 'krakenschema'\nimport { krakenHtml } from 'krakenhtml'\n\n\n\nexport class KrFormComponent extends HTMLElement {\n  constructor() {\n    super();\n\n  }\n\n\n  \n\n\n  initObject(){\n\n\n    \n    this.classList.add(this.elementClass)\n    \n    \n\n    let record_type = this.getAttribute('data-record-type')\n\n    console.log(record_type)\n    \n    let k = KrakenSchemas.get(record_type)\n\n    let jsonSchema = k.jsonSchemaLight\n\n    console.log(jsonSchema)\n    \n    \n    let content = krakenHtml.form.generic('https://www.test.com', 'Thing', null, 'en-US', true)\n\n    \n    this.innerHTML = content\n    \n    \n    \n  }\n\n  connectedCallback() {\n    //this.initObject()\n    this.initObject()\n  }\n\n  disconnectedCallback() {\n  }\n\n  adoptedCallback() {\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n  \n}\n\ncustomElements.define(\"kr-form\", KrFormComponent);\n\n"],"names":[],"version":3,"file":"main.js.map"}